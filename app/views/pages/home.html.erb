<% if logged_in? %>
  <div class="container">
    <div class="home-side-profile">
      <div class="home-cover-photo" style="background-image: url(' <%= current_user.cover_picture.url if current_user.cover_picture? %>'); background-size: cover;"></div>
      <div class="home-profile-photo">
        <%= image_tag current_user.picture.url if current_user.picture? %>
      </div>
      <h1 class="home-name"><%= current_user.name %></h1>
      <h1 class="home-user-name">@<%= current_user.username %></h1>
      <div class="home-user-info">
        <div class="home-chables">
          <h1 class="home-chable-heading">Chables</h1>
          <h1 class="home-chable-count"><%= current_user.chables.count %></h1>
        </div>
        <div class="home-following">
          <h1 class="home-following-heading">Following</h1>
          <h1 class="home-following-count"><%= current_user.following.count %></h1>
        </div>
        <div class="home-followers">
          <h1 class="home-follower-heading">Followers</h1>
          <h1 class="home-follower-count"><%= current_user.followers.count %></h1>
        </div>
      </div>
    </div>
    <div class="home-create-chable">
      <%= render 'shared/chable_form' %>
      <%= render 'shared/feed' %>
    </div>
    <div class="whotofollow">
      <h1 class="whotoheading">Chablers You May Know</h1>
        <div class="whotocontainer">
            <% @other.each do |other| %>   
              <% other.following.each do |follower| %>
               <% next if follower == current_user %>
            <div style="border-bottom: 1px solid #e6ecf0; padding: 5px;">
               <%= image_tag follower.picture.url, ALIGN: "left" %>
               <%= link_to follower.name, follower, class: "whotoname" %>
               <span class="whotousername">@<%= follower.username %></span>
               </div>
             <% end %>
            <% end %>
        </div>
    </div>
  </div>
<% else %>
  <div class="Main-page-content">
    <div class="side-content">
      <div class="first-column">
        <i class="fas fa-map-marker-alt"></i>
        <h1 class="title">Find a point of Chabling</h1>
      </div>
      <div class="second-column">
        <i class="fas fa-globe"></i>
        <h1 class="title">World's biggest platform for Chabling</h1>
      </div>
      <div class="third-column">
        <i class="fas fa-comment"></i>
        <h1 class="title">Find friends to Chable</h1>
      </div>
    </div>
    <div class="other-side-content">
      <h1 class="title front-heading">Start Chabling,<br> Become A Chable Today! <br> Signup or Login</h1>
      <%= link_to "Log in", login_path, class: "button is-primary front-login" %>
      <button id="signupFormBtn" class="button is-primary front-signup">Sign Up</button>
      <div id="signupForm" class="signup-div">
        <div class="new-user-container">
          <span class="close">&times;</span>
          <h1 class="title">Sign Up</h1>
          <%= form_for(@user) do |f| %>
            <%= render 'shared/error_messages', object: f.object %>
            <%= f.label :name, class: "name-label" %>:
            <%= f.text_field :name, class: "input is-primary form-control" %>
            <br>
            <%= f.label :email %>:
            <%= f.email_field :email, class: "input is-primary form-control" %>
            <br>
            <%= f.label :username %>:
            <%= f.text_field :username, class: "input is-primary form-control" %>
            <br>
            <%= f.label :phone_number %>:
            <%= f.text_field :phone_number, class: "input is-primary form-control" %>
            <br>
            <%= f.label :bio %>:
            <%= f.text_field :bio, class: "input is-primary form-control" %>
            <br> 
            <%= f.label :location %>:
            <%= f.text_field :location, class: "input is-primary form-control" %>
            <br> 
            <%= f.label :birthday %>:
            <%= f.date_field :birthday, class: "input is-primary form-control" %>
            <br>  
            <%= f.label :password %>:
            <%= f.password_field :password, class: "input is-primary form-control" %>
            <br>
            <%= f.label :password_confirmation, "Confirmation:" %>
            <%= f.password_field :password_confirmation, class: "input is-primary form-control" %>
            <br>
            <h1 class="new-h1">Profile Picture:</h1>
            <%= f.file_field :picture, accept: 'image/jpeg,image/gif,image/png', id: "image-browse" %>
            <label for="image-browse" class="btn-2 label new-upload">upload</label>
            <br>
            <h1 class="new-h1">Cover Photo:</h1>
            <%= f.file_field :cover_picture, accept: 'image/jpeg,image/gif,image/png', id: "cover-image-browse" %>
            <label for="cover-image-browse" class="btn-2 label new-upload">upload</label>
            <br>
            <%= f.submit "Create my account", class: "button is-primary signup-btn" %>
          <% end %>
        </div>  
      </div>
    </div>
  </div>
<script>
var form = document.getElementById('signupForm');
var button = document.getElementById("signupFormBtn");
var span = document.getElementsByClassName("close")[0];

button.onclick = function() {
  form.style.display = "block";
}

span.onclick = function() {
  form.style.display = "none";
}

window.onclick = function(event) {
  if (event.target == form) {
    form.style.display = "none";
  }
}
</script>

<% end %>
